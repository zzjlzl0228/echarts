# 所遇效果的代码块

## 分页

> **分页思路：**
>
> 1.首先根据形参（当前所在页，总页数，总记录数，回调函数）初始化分页
> 2.对Paging的实例对象添加公共的属性和方法
>      (1)creatHtml获取当前页，总页数，总记录数，判断若当前页不是第一页，则添加首页和上一页按钮，
>    （2）判断总页数大于7时（    当前页<6 时当前页的后面显示省略号。   页码在倒数第四页时，当前页的前面显示...。 页码在中间时 ，前面显示1，... ，在寻找当前页 )
>      （3）当总页数小于6时，显示当前页，其他也正常显示，若当前页小于总页数，则添加下一页a标签，尾页，页码总数，总记录数添加
> 3.给页面添加操作事件
>    首先关闭a标签点击事件，在重新监听a标签的点击事件，获取当前元素的内容及id，对id进行判断
> （1）.id为prePage，若没传入值则pageNo就为1，否则就为传入的值-1
> （2）id为nextPage，同上，。。。。。。传入的值+1

```javascript
(function($, window, document, undefined) {
	//定义分页类
	function Paging(element, options) {
		this.element = element;
		//传入形参
		this.options = {
			//pageNo是页码，如果有就用传入的值，没有的话就是1
			pageNo: options.pageNo || 1,
			// 总共的页数
			totalPage: options.totalPage,
			// 总共的记录数
			totalSize: options.totalSize,
			// 回调函数
			callback: options.callback
		};
		//根据形参初始化分页html和css代码
		this.init();
	}
	//对Paging的实例对象添加公共的属性和方法
	Paging.prototype = {
		constructor: Paging,
		init: function() {
			this.creatHtml();
			this.bindEvent();
		},
		creatHtml: function() {
			var me = this;
			var content = "";
			var current = me.options.pageNo;
			var total = me.options.totalPage;
			var totalNum = me.options.totalSize;
			if (current !== 1) {
				content += "<a id=\"firstPage\">首页</a><a id='prePage'>上一页</a>";
			}
			//总页数大于6时候
			if (total > 7) {
				//当前页数小于5时显示省略号
				if (current < 6) {
					for (var i = 1; i < 7; i++) {
						if (current == i) {
							content += "<a class='current'>" + i + "</a>";
						} else {
							content += "<a>" + i + "</a>";
						}
					}
					content += "<a id='nextPage3'>...</a>";
					content += "<a>" + total + "</a>";
				} else {
					//判断页码在末尾的时候

					if (current < total - 3) {
						content += "<a>1</a>";
						content += "<a id='prePage3'>...</a>";
						for (var i = current - 2; i < current + 3; i++) {
							if (current == i) {
								content += "<a class='current'>" + i + "</a>";
							} else {
								content += "<a>" + i + "</a>";
							}
						}
						content += "<a id='nextPage3'>...</a>";
						content += "<a>" + total + "</a>";
						//页码在中间部分时候	
					} else {
						content += "<a>1</a>";
						content += "<a id='prePage3' >...</a>";
						for (var i = total - 5; i < total + 1; i++) {
							if (current == i) {
								content += "<a class='current'>" + i + "</a>";
							} else {
								content += "<a>" + i + "</a>";
							}
						}
					}
				}
				//页面总数小于6的时候
			} else {
				for (var i = 1; i < total + 1; i++) {
					if (current == i) {
						content += "<a class='current'>" + i + "</a>";
					} else {
						content += "<a>" + i + "</a>";
					}
				}
			}
			if (current < total) {
				content += "<a id='nextPage'>下一页</a>";
			}
			content += "<a id=\"lastPage\">尾页</a>";
			content += "<span class='totalPages'> 共<span>" + total + "</span>页 </span>";
			content += "<span class='totalSize'> 共<span>" + totalNum + "</span>条记录 </span>";
			me.element.html(content);
		},
		//添加页面操作事件
		bindEvent: function() {
			var me = this;
			me.element.off('click', 'a');
			me.element.on('click', 'a', function() {
				var num = $(this).html();
				var id = $(this).attr("id");
				if (id == "prePage") {
					if (me.options.pageNo == 1) {
						me.options.pageNo = 1;
					} else {
						me.options.pageNo = +me.options.pageNo - 1;
					}
				} else if (id == "nextPage") {
					if (me.options.pageNo == me.options.totalPage) {
						me.options.pageNo = me.options.totalPage
					} else {
						me.options.pageNo = +me.options.pageNo + 1;
					}

				} else if (id == "prePage3") {
					if (me.options.pageNo <= 3) {
						me.options.pageNo = 1;
					} else {
						me.options.pageNo = +me.options.pageNo - 3;
					}
				} else if (id == "nextPage3") {
					if (me.options.pageNo >= me.options.totalPage - 3) {
						me.options.pageNo = me.options.totalPage
					} else {
						me.options.pageNo = +me.options.pageNo + 3;
					}
				} else if (id == "firstPage") {
					me.options.pageNo = 1;
				} else if (id == "lastPage") {
					me.options.pageNo = me.options.totalPage;
				} else {
					me.options.pageNo = +num;
				}
				me.creatHtml();
				if (me.options.callback) {
					me.options.callback(me.options.pageNo);
				}
			});
		}
	};
	//通过jQuery对象初始化分页对象
	$.fn.paging = function(options) {
		return new Paging($(this), options);
	}
})(jQuery, window, document);
```

## 上下无缝滚动效果

> 逻辑：当slide滚动到顶部后，会切换到slide2下面，slide1的内容会被slide2的内容覆盖掉，当slide2滚动到顶部后会重新排到slide1后面，循环执行。

```javascript
<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="description" content="">
		<meta name="keywords" content="">
		<style>
			* {
				margin: 0;
				padding: 0
			}

			#slide {
				position: absolute;
				height: 300px;
				width: 260px;
				color: #FA8E93;
				overflow: hidden;
				border: 1px solid #ccc
			}

			#slide p {
				height: 34px;
				line-height: 34px;
				overflow: hidden
			}

			#slide span {
				float: right
			}
		</style>
	</head>
	<body>

		<div id="slide">
			<div id="slide1">
				<p><span>领取了烈焰双11礼包</span>1、dqx5***</p>
				<p><span>领取了烈焰双11礼包</span>2、s376***</p>
				<p><span>领取了街机三国双11礼包</span>3、sdk1***</p>
				<p><span>领取了烈火战神双11礼包</span>4、说好〃不沋伤</p>
				<p><span>领取了街机三国双11礼包</span>5、说好〃不沋伤</p>
				<p><span>领取了烈焰双11礼包</span>6、gao6***</p>
				<p><span>领取了街机三国双11礼包</span>7、ando***</p>
				<p><span>领取了街机三国双11礼包</span>8、6813***</p>
				<p><span>领取了烈焰双11礼包</span>9、lais***</p>
			</div>
			<div id=slide2>
				<p><span>领取了烈焰双11礼包</span>1、dqx5***</p>
				<p><span>领取了烈焰双11礼包</span>2、s376***</p>
				<p><span>领取了街机三国双11礼包</span>3、sdk1***</p>
			</div>
		</div>

		<script>
			var speed = 40
			var slide = document.getElementById("slide");
			var slide2 = document.getElementById("slide2");
			var slide1 = document.getElementById("slide1");
			slide2.innerHTML = slide1.innerHTML

			function Marquee() {
				if (slide2.offsetTop - slide.scrollTop <= 0)
					slide.scrollTop -= slide1.offsetHeight
				else {
					slide.scrollTop++
				}
			}
			var MyMar = setInterval(Marquee, speed)
			slide.onmouseover = function() {
				clearInterval(MyMar)
			}
			slide.onmouseout = function() {
				MyMar = setInterval(Marquee, speed)
			}
		</script>
	</body>
</html>
```

## 输入框

```javascript
<li>
	<div class="need">
		<div class="label"><span>所属行业</span></div>
		<div class="inputGroup area80">
			<input class="input" type="text" name="hangyename" id="hangyename" placeholder="请输入所属行业" onkeyup="noemoji(this);">
									<!-- <div class="textCount">80</div> -->
								</div>
			<div class="errorText" id="hangyenameerr" style="display:none;">
			<div class="label"></div>
			<img src="./参加热门榜单-中企品牌网_files/ts_cw_icon.png">
			<span>所属行业不能为空</span>
		</div>
	</div>
</li>
```

![1566979007755](C:\Users\NING MEI\AppData\Roaming\Typora\typora-user-images\1566979007755.png)

## 搜索框

```javascript
<form class="searchGroup" action="http://www.10pinpaiwang.com/brand/index.php?action=brandlist" method="post">
	<input type="text" name="kw" class="searching" value="" placeholder="请输入品牌名称">
		<label>
			<input type="submit" style="display: none" value="搜索">
			<div class="searchingButton">搜索</div>
		</label>
</form>
```

![1566954463416](C:\Users\NING MEI\AppData\Roaming\Typora\typora-user-images\1566954463416.png)

## 验证码

```javascript
<div class="need">
	<div class="label"><span>验证码</span></div>
	<div class="validateGroup">
		<input name="code" class="imgInput" id="captcha" type="text" value="" placeholder="请输入图片验证码" onfocus="showcaptcha();">
		<div class="img">
			<img src="./参加热门榜单-中企品牌网_files/captcha.png.php" alt="" id="captchapng" onclick="reloadcaptcha();">
			<input name="rnd" type="hidden" id="rnd" value="m44293119646918355">
			
										<div class="status"></div>
									</div>
								</div>
								<div class="errorText" style="display: flex;" id="codeerr">
								</div>
							</div>
```

```javascript
<script type="text/javascript">
function getRand() {									return 'm' + Math.random().toString().substr(2);
}
function showcaptcha() {								ischeckcaptcha = false;
	if (Dd('captchapng').style.display == 'none') {
		Dd('captchapng').style.display = '';
	}
	if (Dd('captchapng').src.indexOf('loading.gif') != -1) {
        rnd = getRand();
		Dd('rnd').value = rnd;								Dd('captchapng').src = 'http://www.10pinpaiwang.com/captcha/captcha.png.php?rnd=' + rnd;
		}
		if (Dd('captcha').value == '点击显示') {				Dd('captcha').value = '';
		}
	}

function reloadcaptch() {								ischeckcaptcha = false;
	rnd = getRand();
	Dd('rnd').value = rnd;
	Dd('captchapng').src = 'http://www.10pinpaiwang.com/captcha/captcha.png.php?rnd=' + rnd;
	Dd('ccaptcha').innerHTML = '';
	Dd('captcha').value = '';
}
function reloadcaptcha() {
	ischeckcaptcha = false;
	rnd = getRand();
	Dd('rnd').value = rnd;
	Dd('captchapng').src = 'http://www.10pinpaiwang.com/captcha/captcha.png.php?rnd=' + rnd;
	Dd('ccaptcha').innerHTML = '';
	Dd('captcha').value = '';
}

function checkcaptcha(s) {								ischeckcaptcha = false;
												//ajax判断验证码
												$.ajax({
													type: 'POST',
													url: '/captcha/captcha.check.php',
													data: {
														captcha: s,
														rnd: rnd
													},
													dataType: 'json',
													cache: false,
													async: false,
													success: function(data) {
														if (data.status == 1) {
															$('#codeerr').css('display', 'flex');
															Dd('codeerr').innerHTML =
																'<div class="label"></div><img src="http://img.10pinpaiwang.com/skin/default/brand/images/duigou.png"/><span style="color: black;">输入验证码正确</span>';
														} else {
															$('#codeerr').css('display', 'flex');
															Dd('codeerr').innerHTML =
																'<div class="label"></div><img src="http://img.10pinpaiwang.com/skin/default/brand/images/cuowu.png"/><span>输入验证码错误！</span>';
															// ischeckcaptcha=false;
															// Dd('captcha').focus;
														}
													},
													error: function(e) {
														$('#codeerr').css('display', 'flex');
														Dd('codeerr').innerHTML =
															'<div class="label"></div><img src="http://img.10pinpaiwang.com/skin/default/brand/images/cuowu.png" align="absmiddle"/><span>验证码错误</span>';
														// ischeckcaptcha=false;
														// Dd('captcha').focus;
															}
	});
	if (s.length == 0) {
		 Dd('codeerr').innerHTML = '';
	}
}
var rnd = '';
var ischeckcaptcha = false;
</script>
```

```javascript
$('#captcha').bind('input propertychange', function() {
	s = this.value
	if (s == '') {
		Dd('ccaptcha').innerHTML = '';
		return;
	} else if (s.length != 4) {
					// Dd('codeerr').innerHTML = '<div class="label"></div><img src="http://img.10pinpaiwang.com/skin/default/brand/images/cuowu.png" align="absmiddle"/><span>输入验证码错误！</span>';
	return;
	}
$.ajax({
	type: 'POST',							url:'http://www.10pinpaiwang.com/captcha/captcha.check.php',
	data: {
		captcha: s,
		rnd: rnd
	},
	dataType: 'json',
		cache: false,
		async: false,
		success: function(data) {
		if (data.status == 1) {
			Dd('codeerr').innerHTML ='<div class="label"></div>
			<img src="http://img.10pinpaiwang.com/skin/default/brand/images/duigou.png" align="absmiddle"/><span style="color: black;">输入验证码正确</span>';
												$('#captcha').removeClass('error')
		} else {
							<!-- //                    ischeckcaptcha=false; -->
							<!-- //                    Dd('captcha').focus; -->
		Dd('codeerr').innerHTML ='<div class="label"></div><img src="http://img.10pinpaiwang.com/skin/default/brand/images/cuowu.png" align="absmiddle"/><span>输入验证码错误！</span>';
		}
	},
	error: function(e) {
		Dd('codeerr').innerHTML ='<div class="label"></div><img src="http://img.10pinpaiwang.com/skin/default/brand/images/cuowu.png" align="absmiddle"/><span>输入验证码错误！</span>';
		}
	});
})


<!-- //生成验证码图片 -->
var rnd = getRand();
var s = $('#captcha').val();
Dd('rnd').value = rnd;
Dd('captchapng').src = 'http://www.10pinpaiwang.com/captcha/captcha.png.php?rnd=' + rnd;
```

### 去除输入的表情符号

```javascript
<!-- //去除输入的表情符号 -->
function noemoji(html) {
	<!-- trim() 去除字符串首尾的空格 -->
	htm = html.value.trim();
	$(html).val(htm);
	var reg =/[^\u0020-\u007E\u00A0-\u00BE\u2E80-\uA4CF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF\u0080-\u009F\u2000-\u201f\u2026\u2022\u20ac\r\n]/g;
	if (htm.match(reg)) {
		toast('不能输入表情符号', 1000);
		htm = htm.replace(reg, '');
		// htm=jQuery.trim(htm);
		htm = htm.replace(/(^\s*)|(\s*$)/g, "");
		$(html).val(htm);
	}
}
```

## 短信验证码

```javascript
<!-- //短信验证码验证 -->
			function checksmscode() {
				var mobile = $('#mobile').val();
				var smscode = $('#smscode').val();
				var ischecksmscode = false;
				$.ajax({
					type: 'POST',
					url: '/brand/smscode.check.php',
					data: {
						mobile: mobile,
						code: smscode
					},
					dataType: 'json',
					cache: false,
					async: false,
					success: function(data) {
						if (!data.status) {
							toast('短信验证码错误', 1500);
							$('#smscodeerr').css('display', 'flex');
							ischecksmscode = false;
						} else {
							ischecksmscode = true;
						}
					},
					error: function(e) {
						ischeckcsmscode = false;
					}
				});
				return ischecksmscode;
			}
```

## 官方网站验证

```javascript
<!-- //官方网站正则验证 -->
			function checkhomepage() {
				var homepage = $('#homepage').val();
				var myreg = /^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/;
				if (myreg.test(homepage)) {
					return true;
				} else {
					return false;
				}
			}
```

## 手机号验证

```javascript
<!-- //手机号正则验证 -->
<div class="modal_content">		
	<h5>绑定用户信息！</h5>
	<div>
		<label for="phone1">注册手机号：</label><br />
			<input id="phone1" type="text" autocomplete="off" placeholder="请输入已绑定的手机号"/>				
	</div> 
	<div>
		<label for="code1">验证码：</label>
		<div class="code1">
			<input id="code1" type="text" autocomplete="off" placeholder="短信验证码"/>				
			<input id="btnSendCode1" type="button" class="btn btn-default" value="获取验证码" onClick="sendMessage1()" />
		</div>				
	</div> 	
	<div class="next">  			
		<button onclick="binding()">确定</button>
	</div>
</div>	 	
<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  		 
<script>
var phoneReg = /(^1[3|4|5|7|8]\d{9}$)|(^09\d{8}$)/;//手机号正则 
var count = 60; //间隔函数，1秒执行
var InterValObj1; //timer变量，控制时间
var curCount1;//当前剩余秒数
/*第一*/
function sendMessage1() {
	curCount1 = count;	
// $.trim()是jQuery提供的函数，用于去掉字符串首尾的空白字符。
	var phone = $.trim($('#phone1').val());
		if (!phoneReg.test(phone)) {
			alert(" 请输入有效的手机号码"); 
			return false;
		}
		//设置button效果，开始计时
		$("#btnSendCode1").attr("disabled", "true");
		$("#btnSendCode1").val( + curCount1 + "秒再获取");
		InterValObj1 = window.setInterval(SetRemainTime1, 1000); //启动计时器，1秒执行一次
				//向后台发送处理数据
					 
			}
function SetRemainTime1() {
	if (curCount1 == 0) {                
					window.clearInterval(InterValObj1);//停止计时器
					$("#btnSendCode1").removeAttr("disabled");//启用按钮
$("#btnSendCode1").val("重新发送");
	}else {
	curCount1--;
$("#btnSendCode1").val( + curCount1 + "秒再获取");
	}
} 
			
/*提交*/
function binding(){
	alert()
}
</script>
```

## 图片上传

```javascript
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>点击图片上传</title>
		<style type="text/css">
			#imgPreview {
				width: 40%;
				height: 180px;
				margin: 10px auto 0px auto;
				border: 1px solid black;
				text-align: center;
			}

			#prompt3 {
				width: 100%;
				height: 180px;
				text-align: center;
				position: relative;
			}

			#imgSpan {
				position: absolute;
				top: 15px;
				left: 40px;
				padding: 50px;
				border: 1px solid #CCCCCC;
			}

			.filepath {
				width: 100%;
				height: 100%;
				opacity: 0;
			}

			#img3 {
				height: 200px;
				width: 200px;
				display: none;
				position: relative;
			}
			#img5 {
				width: 30px;
				height: 30px;
				border-radius: 10px;
				margin-left: -31px;
				position: absolute;
				top: 205px;
				left: 42.5%;
				display: none;
			}
		</style>
	</head>
	<body>
		<div id="imgPreview">
			<div id="prompt3">
				<span id="imgSpan">
					点击上传
					<br />
					+
					<!--AUI框架中的图标-->
				</span>
				<input type="file" id="file" class="filepath" onchange="changepic(this)" accept="image/jpg,image/jpeg,image/png,image/PNG">
				<!--当vaule值改变时执行changepic函数，规定上传的文件只能是图片-->
			</div>
			<img src="#" id="img3" />
			<img src="img/close.png" id="img5">
		</div>
		<script src="jquery.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			function changepic() {
				// $("#prompt3").css("display", "none");
				var reads = new FileReader();
				f = document.getElementById('file').files[0];
				reads.readAsDataURL(f);
				reads.onload = function(e) {
					document.getElementById('img3').src = this.result;
					$("#img3").css("display", "block");
					$('#img5').css("display","block")
				};
			}
			$("#img5").on('click',function(){
				$("#img3").css("display", "none");
				$('#img5').css("display","none")
			})
		</script>
	</body>
</html>

```

## 字体大小随浏览器得变化而变化

- **注：**就是用rem固定字体大小，然后动态根据屏幕宽度改变html的字体大小

```javascript
<style>
     .button {
        font-size: 1.2rem;
     }
 </style>
</head>
<body>
 <div class="button">Button</div>
 <script>
      setInterval(function(){
        var html =document.querySelector('html');
        html.style.fontSize = document.body.clientWidth/30+'px';
      },10)
 </script>

//rem是根据html的字体大小变化的
//em是根据父元素来变化的
```

## 上下轮播

```javascript
$(document).ready(function() {
	
	var speed = 80
	var slide = document.getElementById('slide')
	if (!slide) return
	var slide2 = document.getElementById('slide2')
	var slide1 = document.getElementById('slide1')
	slide2.innerHTML = slide1.innerHTML

	function Marquee() {
		if (slide2.offsetTop - slide.scrollTop <= 0) {
			slide.scrollTop -= slide1.offsetHeight + 16
		} else {
			slide.scrollTop += 1
		}
	}
	var MyMar = setInterval(Marquee, speed)
	slide.onmouseover = function() {
		clearInterval(MyMar)
	}
	slide.onmouseout = function() {
		MyMar = setInterval(Marquee, speed)
	}
})
```

![1567479528397](C:\Users\NING MEI\AppData\Roaming\Typora\typora-user-images\1567479528397.png)

![1567479547963](C:\Users\NING MEI\AppData\Roaming\Typora\typora-user-images\1567479547963.png)

![1567479563642](C:\Users\NING MEI\AppData\Roaming\Typora\typora-user-images\1567479563642.png)

## tab切换

```javascript
var span = document.querySelectorAll('#tab span'),       //css选择器
    div = document.querySelectorAll('.tabpane');

for(var i=0;i<span.length;i++){                   
    //循环span标签
    span[i].idx = i;                                    
//给span一个自定义的idx属性，将I赋值进去，因为下边的循环不能直接拿到这个循环的i
    span[i].onclick = function(){
        for(var j=0;j<div.length;j++){         
            //循环div标签
            div[j].style.display = 'none';    
            //每次点击都先隐藏掉div，并移除class
            span[j].classList.remove('active');
        }
        div[this.idx].style.display = 'block';           //给当前div显示出来
        this.classList.add('active');                      //增加class
    }
}
```

## 动态添加li

> 1.将数据写到json文件中
>
> ```javascript
> [{
> 		"industry": "型钢行业",
> 		"day": "22",
> 		"month": "2019-08"
> 	},
> 	{
> 		"industry": "铜门行业",
> 		"day": "22",
> 		"month": "2019-08"
> 	},
> 	{
> 		"industry": "面包机行业",
> 		"day": "30",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "模具行业",
> 		"day": "30",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "校服行业",
> 		"day": "30",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "灯饰行业",
> 		"day": "05",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "保温材料行业",
> 		"day": "05",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "标准件行业",
> 		"day": "05",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "蚕丝被行业",
> 		"day": "04",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "钢化玻璃行业",
> 		"day": "04",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "调味品行业",
> 		"day": "04",
> 		"month": "2019-07"
> 	},
> 	{
> 		"industry": "大闸蟹行业",
> 		"day": "04",
> 		"month": "2019-06"
> 	}
> ]
> 
> ```
>
> 2.在html中引入json文件（与html结构在同一目录下）
>
> 3.将其中一个的结构写好，并进行克隆
>
> ```javascript
> //  获取json文件中得数据并显示在页面上
> $(document).ready(function() {
> 	$.getJSON('data.json', function(data){
> 		var $jsontip = $(".row");
> 		var strHtml = ""; //存储数据的变量
> 		$.each(data, function(infoIndex, info) {
> 	var $cell = $('.row .cell:first').clone()
> 			if (infoIndex == 0) {
> 				$jsontip.empty()
> 			}
> 										$cell.find('.logoImage img')attr('src',info["url"])
> 							$cell.find('.title').text(info.title)
> 							$cell.find('.description').text(info.description)
> 							$jsontip.append($cell)
> 			})
> 	})
> })
> ```
>
> 4.获取到json文件得数据及页数，并使用数组截取得方式显示某一页得数据
>
> ```javascript
> var $jsontip = $(".showContent");
> var strHtml = ""; //存储数据的变量
> var length = data.length;
> // 每页显示的li数
> var num = 12;
> // 多余的li数
> var num1 = length % num;
> if (num1 != 0) {
> 	page = Math.floor(length / num) + 1;
> } else {
> 	page = Math.floor(length / num)
> }
> $('.totalPages span').text(page)
> $('.totalSize span').text(length)
> ```
>
> 6.封装显示得方法
>
> ```javascript
> //  遍历获取到的json数据,并将内容填到相应位置进行显示
> function show(pageNum) {
> 	$.each(pageNum, function(infoIndex, info) {
> 		var $cell = $('.showContent li:first').clone()
> 		if (infoIndex == 0) {
> 												               $jsontip.empty()
> 		}
> 								$cell.find('.industry').text(info["industry"])
> 								$cell.find('.day').text(info.day)
> 								$cell.find('.month').text(info.month)
> 								$jsontip.append($cell)
> 							})
> 						}
> ```
>

## 分页显示数据

> 显示效果，最开始显示第一页，此时上一页按钮隐藏，当点击下一页时，显示上一页（并改变其样式），当到最后一页时，隐藏下一页按钮，到首页时，隐藏上一页按钮

```javascript
// 设置当前页(默认为0)
var currentPage = 0;
show(pageOne)
$('#prevPage').hide()
						$('#nextPage').click(function() {
	$('#prevPage').show()
	currentPage++;
	for (var i = 0; i < page; i++) {
		var pageNumber = data.slice(i * num, (i + 1) * num);
		if (i == currentPage) {
			show(pageNumber)
			// 当点击下一页时将滚动条得垂直位置变为0
			$(window).scrollTop(0);
		}
	}
	if (currentPage > 0) {
		$('#prevPage').css('background','rgba(211,20,28,1)');
								$('#prevPage').css('color', 'white');
	}
	if (currentPage >= (page - 1)) {
// $('#nextPage').css('cursor', 'not-allowed');
		$('#nextPage').hide()
	} else {
		$('#nextPage').show()
	}
})

						$('#prevPage').click(function() {
	$('#nextPage').show()
	currentPage--;

	for (var i = 0; i < page; i++) {
		var pageNumber = data.slice(i * num, (i + 1) * num);
		if (i == currentPage) {
			show(pageNumber)
            $(window).scrollTop(0);
		}
	}

	if (currentPage < (page - 1)) {
		$('#nextPage').css('background', 'rgba(211,20,28,1)');
								$('#nextPage').css('color', 'white');
	}
							
	if(currentPage<0) {
		$('#prevPage').hide()
	}else {
		$('#prevPage').show()
	}
})
```

## 使用canvas绘制图片验证码

> **:happy:html结构**
>
> ```javascript
> <a href="#" id="changeImg">
> 											<canvas class="show-captcha" id="canvas" width="150" height="40"></canvas>
> 										</a>
> ```
>
> ---
>
> 
>
> js实现过程**
>
> ```javascript
> jQuery(function($) {
> 
> 	/**生成一个随机数**/
> 	function randomNum(min, max) {
> 		return Math.floor(Math.random() * (max - min) + min);
> 	}
> 	/**生成一个随机色**/
> 	function randomColor(min, max) {
> 		var r = randomNum(min, max);
> 		var g = randomNum(min, max);
> 		var b = randomNum(min, max);
> 		return "rgb(" + r + "," + g + "," + b + ")";
> 	}
> 	var code = drawPic();
> 	document.getElementById("changeImg").onclick = function(e) {
> 		e.preventDefault();
> 		code = drawPic();
> 	}
> 	/**绘制验证码图片**/
> 	function drawPic() {
> 		var canvas = document.getElementById("canvas");
> 		var width = canvas.width;
> 		var height = canvas.height;
> 		//获取该canvas的2D绘图环境 
> 		var ctx = canvas.getContext('2d');
> 		ctx.textBaseline = 'bottom';
> 		/**绘制背景色**/
> 		// ctx.fillStyle = randomColor(180, 240);
> 		ctx.fillStyle = 'white'
> 		//颜色若太深可能导致看不清
> 		ctx.fillRect(0, 0, width, height);
> 		/**绘制文字**/
> 		var str = 'ABCEFGHJKLMNPQRSTWXY123456789';
> 		var code = "";
> 		//生成四个验证码
> 		for (var i = 1; i <= 4; i++) {
> 			var txt = str[randomNum(0, str.length)];
> 			code = code + txt;
> 			ctx.fillStyle = randomColor(50, 160);
> 			//随机生成字体颜色
> 			ctx.font = randomNum(15, 40) + 'px SimHei';
> 			//随机生成字体大小
> 			var x = 10 + i * 25;
> 			var y = randomNum(25, 35);
> 			var deg = randomNum(-45, 45);
> 			//修改坐标原点和旋转角度
> 			ctx.translate(x, y);
> 			ctx.rotate(deg * Math.PI / 180);
> 			ctx.fillText(txt, 0, 0);
> 			//恢复坐标原点和旋转角度
> 			ctx.rotate(-deg * Math.PI / 180);
> 			ctx.translate(-x, -y);
> 		}
> 
> 		/**绘制干扰线**/
> 		for (var i = 0; i < 3; i++) {
> 			ctx.strokeStyle = randomColor(40, 180);
> 			ctx.beginPath();
> 			ctx.moveTo(randomNum(0, width / 2), randomNum(0, height / 2));
> 			ctx.lineTo(randomNum(0, width / 2), randomNum(0, height));
> 			ctx.stroke();
> 		}
> 		/**绘制干扰点**/
> 		for (var i = 0; i < 50; i++) {
> 			ctx.fillStyle = randomColor(255);
> 			ctx.beginPath();
> 			ctx.arc(randomNum(0, width), randomNum(0, height), 1, 0, 2 * Math.PI);
> 			ctx.fill();
> 		}
> 		return code;
> 	}
> });
> ```
>
> ***
>

## 点击按钮添加/删除

- html结构

```javascript
<li>
	<div class="endStatus" id="appendTextarea">
		<div class="need">
			<div class="label"></div>
			<div class="appendTextarea appendTextareaDel" style="margin-right: 30px; display: none;" >
				<img src="img/del.png" >删除品牌信息
</div>
			<div class="appendTextarea appendTextareaAdd">
				<img src="img/add.png" >添加品牌信息
</div>
			</div>
		</div>
</li>
```

**html结构内只显示当前显示的元素**

- 添加点击事件（动态添加html结构）

```javascript
$('.needInputGroup').on('click', '.appendTextareaAdd', function(e) {
							// 页面中共有3个文本域,第四个文本域得出现就是点击按钮出现得添加品牌得信息
							let textareaIndex = $('.textareaGroup').length + 1
							var dom = "<li>" +
								" <div class=\"need\">" +
								"   <div class=\"label\" style=\"align-self: flex-start\">" +
								"     <input type=\"text\" placeholder='请填写标题' name=\"data[" + textareaIndex + "][name]\" class=" +
								'moreinfotitle' + textareaIndex + ">" +
								"   </div>" +
								"   <div class=\"textareaGroup area800\">" +
								"     <textarea class=\"input\" name=\"data[" + textareaIndex +
								"][content]\" placeholder='请填写详细说明'></textarea>  " +
								"   </div>" +
								" </div>\n</li>" +
								"<li id=\"appendTextarea\" class=\"endStatus\">" +
								"  <div class=\"need\">" +
								"    <div class=\"label\"></div>" +
								"    <div class=\"appendTextarea appendTextareaDel\" style=\"margin-right: 30px\">" +
								"      <img src=\"img/del.png\" alt=\"\" srcset=\"\">" +
								"      删除品牌信息" +
								"    </div>" +
								"    <div class=\"appendTextarea appendTextareaAdd\">" +
								"      <img src=\"img/add.png\" alt=\"\" srcset=\"\">" +
								"      添加品牌信息" +
								"    </div>" +
								"  </div>" +
								"</li>"
							$('#appendTextarea').after(dom)
							$('.appendTextareaAdd').css('display', 'none');
							$('.appendTextareaDel').css('display', 'flex');
							var length = $('.appendTextareaAdd').length - 1;
							$('.appendTextareaDel:first').css('display', 'none')
							$($('.appendTextareaAdd')[length]).css('display', 'flex')
							$($('.appendTextareaDel')[$('.appendTextareaDel').length - 1]).css('display', 'flex')
						})
				
```

- 删除点击事件

```javascript
$('.needInputGroup').on('click', '.appendTextareaDel', function(e) {
					$(this).parent().parent().prev().remove()
							$(this).parent().parent().remove()
	if ($('.textareaGroup').length <=3) {
								$('.appendTextareaAdd').css('display', 'flex');
	}
//永远保证最后一个末尾状态得	添加品牌信息按钮 显示				$('.endStatus:last').find('.appendTextareaAdd').css('display','flex')
							
})
```

